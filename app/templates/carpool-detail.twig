{% extends "layout.twig" %}

{% block title %}Carpool Details | EcoRide{% endblock %}



{% block content %}
<pre>{{ preferences|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
<div class="max-w-2xl mx-auto p-4">
    <h2 class="text-2xl font-bold text-green-700 mb-4 text-center">Carpool Details</h2>

    <div class="bg-white shadow rounded-xl p-6">
        <p class="text-sm text-gray-700"><strong>Departure:</strong> {{ carpool.pickup_location }}</p>
        <p class="text-sm text-gray-700"><strong>Destination:</strong> {{ carpool.dropoff_location }}</p>
        <p class="text-sm text-gray-700"><strong>Date:</strong> {{ carpool.departure_time }}</p>

        <hr class="my-4">

        <p class="text-sm text-gray-700"><strong>Driver:</strong> {{ carpool.driver_name }}</p>
        {% if carpool.driver_rating is defined %}
        <p class="text-sm text-gray-600">Rating: {{ carpool.driver_rating }}/5</p>
        {% endif %}

        {% if preferences %}
        <hr class="my-4">
        <h3 class="text-sm font-semibold text-gray-800">Driver Preferences</h3>
        <ul class="text-sm text-gray-600 mt-2 space-y-1">
            {% if preferences.smoking_allowed is defined %}
            <li>Smoking: {{ preferences.smoking_allowed ? 'Allowed' : 'Not Allowed' }}</li>
            {% endif %}
            {% if preferences.music_preference is defined %}
            <li>Music: {{ preferences.music_preference }}</li>
            {% endif %}
            {% if preferences.chat_preference is defined %}
            <li>Chat: {{ preferences.chat_preference }}</li>
            {% endif %}
        </ul>
        {% endif %}

        <hr class="my-4">

        <p class="text-sm text-gray-700"><strong>Vehicle:</strong> {{ carpool.make }} {{ carpool.model }}</p>
        <p class="text-sm text-gray-700"><strong>Energy Type:</strong> {{ carpool.energy_type|capitalize }}</p>

        <hr class="my-4">

        <p class="text-sm text-gray-700"><strong>Available Seats:</strong> {{ carpool.total_seats - carpool.occupied_seats }}</p>
    </div>

    <div class="mt-6 text-center">
        <button class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded">
            Join Carpool
        </button>
    </div>
</div>
{% endblock %}
