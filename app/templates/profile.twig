{% extends "layout.twig" %}

{% block content %}
	<div
		class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md mt-6">
		<!-- User Info -->
		<div class="text-center">
			<img src="https://via.placeholder.com/100" alt="Profile Picture" class="w-24 h-24 rounded-full mx-auto">
			<h2 class="text-xl font-semibold mt-2">{{ user.name ?? "Guest User" }}</h2>
			<p class="text-gray-600">{{ user.role | capitalize }}</p>
			<p class="text-sm text-gray-700 mt-1">💰
				<strong>{{ user.credits }}</strong>
				credits</p>
		</div>

		<!-- Stats -->
		<div class="flex justify-around my-4">
			<div class="text-center">
				<p class="text-lg font-bold">⭐
					{{ user.driver_rating ?? "5.0" }}</p>
				<p class="text-sm text-gray-500">Rating</p>
			</div>
			<div class="text-center">
				<p class="text-lg font-bold">🚗
					{{ user.rides ?? "0" }}</p>
				<p class="text-sm text-gray-500">Rides Completed</p>
			</div>
		</div>

		<!-- Preferences Section -->
		<div class="mt-6">
			<h3 class="text-lg font-semibold mb-2">Preferences</h3>
			<form action="/profile/preferences" method="POST" class="space-y-2">
				<label class="block text-sm">Smoking:
					<input type="text" name="smoking_preference" value="{{ preferences.smoking_preference }}" class="w-full border p-2 rounded">
				</label>
				<label class="block text-sm">Pets:
					<input type="text" name="pets_allowed" value="{{ preferences.pets_allowed }}" class="w-full border p-2 rounded">
				</label>
				<label class="block text-sm">Music:
					<input type="text" name="music_preference" value="{{ preferences.music_preference }}" class="w-full border p-2 rounded">
				</label>
				<label class="block text-sm">Chat:
					<input type="text" name="chat_preference" value="{{ preferences.chat_preference }}" class="w-full border p-2 rounded">
				</label>
				<button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">
					Save Preferences
				</button>
			</form>
		</div>

		<!-- Reviews Section -->
		{% if reviews is not empty %}
			<div class="mt-6">
				<h3 class="text-lg font-semibold mb-2">Passenger Reviews</h3>
				<ul class="space-y-3">
					{% for review in reviews %}
						<li class="border p-3 rounded bg-gray-50">
							<p class="text-sm">⭐
								{{ review.rating }}
								–
								<em>{{ review.comment }}</em>
							</p>
							<p class="text-xs text-gray-500">By
								{{ review.reviewer_name }}</p>
						</li>
					{% endfor %}
				</ul>
			</div>
		{% endif %}
	</div>
{% endblock %}

